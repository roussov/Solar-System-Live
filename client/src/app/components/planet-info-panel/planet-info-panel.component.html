<div
  class="panel"
  role="dialog"
  aria-modal="true"
  [attr.aria-label]="'Données sur ' + planet.displayName"
>
  <!-- Bouton de fermeture -->
  <button
    class="close-btn"
    type="button"
    (click)="onClose()"
    aria-label="Fermer le panneau des informations planète"
  >
    ×
  </button>

  <!-- En-tête : titre + type de planète -->
  <header class="panel-header">
    <div class="panel-title-row">
      <h2>{{ planet.displayName }}</h2>

      <!-- Tag type de planète (simplifié par nom) -->
      <span
        class="planet-type-chip"
        *ngIf="
          planet.name === 'mercury' ||
          planet.name === 'venus' ||
          planet.name === 'earth' ||
          planet.name === 'mars'
        "
      >
        Planète tellurique
      </span>

      <span
        class="planet-type-chip"
        *ngIf="planet.name === 'jupiter' || planet.name === 'saturn'"
      >
        Géante gazeuse
      </span>

      <span
        class="planet-type-chip"
        *ngIf="planet.name === 'uranus' || planet.name === 'neptune'"
      >
        Géante de glace
      </span>

      <span
        class="planet-type-chip"
        *ngIf="planet.name === 'pluto'"
      >
        Planète naine
      </span>
    </div>

    <div class="panel-subtitle">
      {{ planet.name | uppercase }} · Système solaire
    </div>
  </header>

  <!-- Corps : description + caractéristiques -->
  <section class="panel-body">
    <!-- Résumé / description courte -->
    <p class="planet-summary">
      {{ planet.info }}
    </p>

    <!-- Caractéristiques physiques -->
    <section
      class="planet-section planet-physical"
      aria-label="Caractéristiques physiques"
    >
      <h3>Caractéristiques physiques</h3>

      <ul>
        <li>
          <span>Rayon moyen</span>
          <span>{{ planet.radiusKm | number }} km</span>
        </li>

        <li>
          <span>Rayon relatif à la Terre</span>
          <!-- 6371 km ~ rayon moyen Terre -->
          <span>
            ≈ {{ (planet.radiusKm / 6371) | number: '1.2-2' }} R⊕
          </span>
        </li>

        <li>
          <span>Masse</span>
          <span>{{ planet.massKg | number: '1.0-2' }} kg</span>
        </li>

        <li>
          <span>Masse relative à la Terre</span>
          <!-- 5.97237e24 kg ~ masse Terre -->
          <span>
            ≈ {{ (planet.massKg / 5.97237e24) | number: '1.2-2' }} M⊕
          </span>
        </li>
      </ul>
    </section>

    <!-- Paramètres orbitaux (valeurs dérivées simples) -->
    <section
      class="planet-section planet-orbital"
      aria-label="Paramètres orbitaux moyens"
    >
      <h3>Paramètres orbitaux (moyens)</h3>

      <ul>
        <li>
          <span>Demi-grand axe</span>
          <span>{{ planet.semiMajorAxisAU | number: '1.3-3' }} UA</span>
        </li>

        <li>
          <span>Distance moyenne au Soleil</span>
          <!-- 1 UA ≈ 149 597 870.7 km -->
          <span>
            ≈
            {{
              (planet.semiMajorAxisAU * 149597870.7) | number: '1.0-0'
            }}
            km
          </span>
        </li>

        <li>
          <span>Position affichée</span>
          <span>
            Basée sur des éphémérides temps réel (backend NASA JPL Horizons)
          </span>
        </li>
      </ul>
    </section>
  </section>

  <!-- Pied de carte : note / source -->
  <footer class="panel-footer">
    <p>
      Les valeurs ci-dessus sont des ordres de grandeur physiques moyens.
      Les positions à l’écran sont calculées à partir de données
      d’éphémérides en temps réel, et non d’une simulation locale.
    </p>
  </footer>
</div>
