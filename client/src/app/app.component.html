<div class="app-shell">
  <!-- En-tête global -->
  <header class="app-header">
    <div class="app-header-main">
      <h1 class="title">
        Système solaire – données réelles (NASA JPL Horizons)
      </h1>

      <span class="source-badge">
        Données éphémérides · NASA JPL
      </span>
    </div>

    <p class="subtitle">
      Visualisation en temps quasi réel des positions des planètes autour du Soleil (Pluton incluse),
      basée sur des éphémérides externes (pas de simulation locale arbitraire).
    </p>

    <div class="app-header-secondary">
      <!-- Dernière mise à jour (exposé par le composant enfant) -->
      <div class="last-update" *ngIf="solar.lastUpdateTimestamp as ts">
        <span class="last-update-label">Dernière mise à jour :</span>
        <span class="last-update-value">{{ ts }}</span>
      </div>

      <div class="reference-badge" *ngIf="solar.metadata as meta">
        <span class="last-update-label">Repère :</span>
        <span
          class="reference-chip"
          [title]="referenceFrameTooltip"
        >
          {{ meta.referenceFrame || 'J2000-ECLIPTIC' }}
        </span>
      </div>

      <div class="latency-badge" *ngIf="solar.averageLatencyMs as avg">
        <span class="last-update-label">Latence moyenne :</span>
        <span class="latency-chip" [title]="'Temps moyen des requêtes Horizons depuis le chargement'">
          {{ avg | number:'1.0-0' }} ms
        </span>
      </div>

      <div class="freshness" *ngIf="solar.freshnessLabel as fresh">
        <span class="last-update-label">Fraîcheur :</span>
        <span class="last-update-value">{{ fresh }}</span>
      </div>

      <!-- Indicateur de chargement (lecture directe des props publiques du composant enfant) -->
      <div class="loading-indicator" *ngIf="solar.isLoading">
        <span class="loading-dot"></span>
        <span>Mise à jour des éphémérides en cours…</span>
      </div>
    </div>

    <!-- Bannière d’erreur éventuelle -->
    <div class="error-banner" *ngIf="solar.errorMessage as err">
      {{ err }}
    </div>
  </header>

  <!-- Contenu principal : composant de visualisation -->
  <main class="app-content">
    <!--
      On donne une référence de template #solar pour accéder depuis le parent
      aux propriétés publiques du composant SolarSystemComponent :
      - solar.lastUpdateTimestamp
      - solar.isLoading
      - solar.errorMessage
    -->
    <app-solar-system #solar></app-solar-system>
  </main>
</div>
